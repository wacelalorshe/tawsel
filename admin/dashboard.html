<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - ÙˆØ³ÙŠÙ„ Ø³ØªÙˆØ±</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2E86AB;
            --secondary-color: #A23B72;
            --accent-color: #F18F01;
            --light-color: #f8f9fa;
            --dark-color: #2B2D42;
            --success-color: #4bb543;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            line-height: 1.6;
        }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ */
        .sidebar {
            min-height: 100vh;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%) !important;
            box-shadow: 2px 0 15px rgba(0,0,0,0.1);
        }
        
        .sidebar .nav-link {
            color: #fff !important;
            padding: 12px 20px;
            margin: 5px 0;
            border-radius: 8px;
            transition: all 0.3s;
        }
        
        .sidebar .nav-link:hover,
        .sidebar .nav-link.active {
            background-color: rgba(255,255,255,0.15);
            transform: translateX(5px);
        }
        
        /* Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª */
        .stat-card {
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            border: none;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.12);
        }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¹Ø§Ù…Ø© */
        .card {
            border: none;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.12);
        }
        
        .btn {
            border-radius: 8px;
            font-weight: 500;
            padding: 10px 20px;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border: none;
        }
        
        .btn-primary:hover {
            background: linear-gradient(45deg, var(--secondary-color), var(--primary-color));
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: linear-gradient(45deg, var(--success-color), #3a9d3a);
            border: none;
        }
        
        .btn-warning {
            background: linear-gradient(45deg, var(--warning-color), #e0a800);
            border: none;
        }
        
        .btn-danger {
            background: linear-gradient(45deg, var(--danger-color), #c82333);
            border: none;
        }
        
        .admin-card .card-header {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            font-weight: 600;
            border-radius: 12px 12px 0 0 !important;
        }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
        .loading-spinner {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 5px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª */
        .product-image {
            height: 200px;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .admin-product-card:hover .product-image {
            transform: scale(1.05);
        }
        
        .price-tag {
            font-weight: 700;
            color: var(--primary-color);
        }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„ØªØ¬Ø§ÙˆØ¨ */
        @media (max-width: 768px) {
            .sidebar {
                min-height: auto;
            }
            
            .display-4 {
                font-size: 2rem;
            }
        }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ */
        .form-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        
        .form-modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
        .table-responsive {
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .table th {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            font-weight: 600;
        }
        
        .table td {
            vertical-align: middle;
        }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ */
        .order-status {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }
        
        .status-processing {
            background-color: #cce7ff;
            color: #004085;
        }
        
        .status-shipped {
            background-color: #d1ecf1;
            color: #0c5460;
        }
        
        .status-delivered {
            background-color: #d4edda;
            color: #155724;
        }
        
        .status-cancelled {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª */
        .action-buttons {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }
        
        .action-buttons .btn {
            padding: 5px 10px;
            font-size: 0.8rem;
        }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØµÙÙŠØ© */
        .search-filter-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <!-- Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <script>
        if (localStorage.getItem('adminLoggedIn') !== 'true') {
            window.location.href = 'login.html';
        }
    </script>

    <div class="container-fluid">
        <div class="row">
            <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ -->
            <nav class="col-md-3 col-lg-2 d-md-block sidebar bg-dark">
                <div class="position-sticky pt-3">
                    <h4 class="text-white text-center mb-4">
                        <i class="fas fa-store me-2"></i>ÙˆØ³ÙŠÙ„ Ø³ØªÙˆØ±
                    </h4>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active text-white" href="dashboard.html">
                                <i class="fas fa-tachometer-alt me-2"></i>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="#" onclick="showProductsManagement()">
                                <i class="fas fa-boxes me-2"></i>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="#" onclick="showOrdersManagement()">
                                <i class="fas fa-shopping-cart me-2"></i>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="#" onclick="showCustomersManagement()">
                                <i class="fas fa-users me-2"></i>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="../index.html">
                                <i class="fas fa-store me-2"></i>Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…ØªØ¬Ø±
                            </a>
                        </li>
                    </ul>
                    
                    <div class="mt-4 p-3 text-center text-white">
                        <small>
                            <i class="fas fa-user me-1"></i>
                            <span id="admin-username">wacelalorshe</span>
                        </small>
                    </div>
                </div>
            </nav>

            <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h2 class="text-primary" id="page-title">
                        <i class="fas fa-tachometer-alt me-2"></i>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
                    </h2>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <button class="btn btn-sm btn-outline-secondary me-2" onclick="location.reload()">
                            <i class="fas fa-redo me-1"></i>ØªØ­Ø¯ÙŠØ«
                        </button>
                        <button class="btn btn-sm btn-outline-danger" onclick="logout()">
                            <i class="fas fa-sign-out-alt me-1"></i>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
                        </button>
                    </div>
                </div>

                <!-- Ù‚Ø³Ù… Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
                <div id="dashboard-content">
                    <!-- Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ© -->
                    <div class="row">
                        <div class="col-md-3">
                            <div class="card text-white bg-primary mb-3 stat-card">
                                <div class="card-body text-center">
                                    <h5 class="card-title">
                                        <i class="fas fa-box me-2"></i>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                                    </h5>
                                    <p class="card-text display-4" id="products-count">0</p>
                                    <small>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-white bg-success mb-3 stat-card">
                                <div class="card-body text-center">
                                    <h5 class="card-title">
                                        <i class="fas fa-shopping-cart me-2"></i>Ø§Ù„Ø·Ù„Ø¨Ø§Øª
                                    </h5>
                                    <p class="card-text display-4" id="orders-count">0</p>
                                    <small>Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-white bg-warning mb-3 stat-card">
                                <div class="card-body text-center">
                                    <h5 class="card-title">
                                        <i class="fas fa-users me-2"></i>Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
                                    </h5>
                                    <p class="card-text display-4" id="customers-count">0</p>
                                    <small>Ø¹Ù…Ù„Ø§Ø¡ Ù…Ø³Ø¬Ù„ÙŠÙ†</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-white bg-info mb-3 stat-card">
                                <div class="card-body text-center">
                                    <h5 class="card-title">
                                        <i class="fas fa-chart-line me-2"></i>Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª
                                    </h5>
                                    <p class="card-text display-4" id="revenue-count">$0</p>
                                    <small>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø© -->
                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="card admin-card">
                                <div class="card-header">
                                    <h5 class="card-title mb-0">
                                        <i class="fas fa-bolt me-2"></i>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø©
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div class="d-flex flex-wrap gap-2">
                                        <button class="btn btn-success" onclick="showAddProductForm()">
                                            <i class="fas fa-plus me-2"></i>Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯
                                        </button>
                                        <button class="btn btn-outline-primary" onclick="showProductsManagement()">
                                            <i class="fas fa-list me-2"></i>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                                        </button>
                                        <button class="btn btn-warning" onclick="addSampleProduct()">
                                            <i class="fas fa-vial me-2"></i>Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ ØªØ¬Ø±ÙŠØ¨ÙŠ
                                        </button>
                                        <button class="btn btn-info" onclick="testFirebaseConnection()">
                                            <i class="fas fa-wifi me-2"></i>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
                    <div class="row mt-5">
                        <div class="col-12">
                            <div class="card admin-card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="card-title mb-0">
                                        <i class="fas fa-boxes me-2"></i>Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                                    </h5>
                                    <button class="btn btn-sm btn-outline-primary" onclick="showProductsManagement()">
                                        Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„ <i class="fas fa-arrow-left ms-1"></i>
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div id="admin-products-container" class="row">
                                        <!-- Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                                        <div class="col-12 text-center">
                                            <div class="loading-spinner"></div>
                                            <p class="mt-3">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª...</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø­Ø¯ÙŠØ«Ø© -->
                    <div class="row mt-5">
                        <div class="col-12">
                            <div class="card admin-card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="card-title mb-0">
                                        <i class="fas fa-shopping-cart me-2"></i>Ø£Ø­Ø¯Ø« Ø§Ù„Ø·Ù„Ø¨Ø§Øª
                                    </h5>
                                    <button class="btn btn-sm btn-outline-primary" onclick="showOrdersManagement()">
                                        Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„ <i class="fas fa-arrow-left ms-1"></i>
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</th>
                                                    <th>Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
                                                    <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                                                    <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
                                                    <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                                    <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                                                </tr>
                                            </thead>
                                            <tbody id="recent-orders">
                                                <tr>
                                                    <td colspan="6" class="text-center text-muted py-4">
                                                        Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø­Ø¯ÙŠØ«Ø©
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ù‚Ø³Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
                <div id="products-management-content" class="d-none">
                    <div class="card admin-card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-boxes me-2"></i>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                            </h5>
                            <button class="btn btn-sm btn-success" onclick="showAddProductForm()">
                                <i class="fas fa-plus me-1"></i>Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬
                            </button>
                        </div>
                        <div class="card-body">
                            <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØµÙÙŠØ© -->
                            <div class="search-filter-container">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="input-group">
                                            <input type="text" id="product-search" class="form-control" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬...">
                                            <button class="btn btn-primary" onclick="searchProducts()">
                                                <i class="fas fa-search"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <select id="category-filter" class="form-select" onchange="filterProductsByCategory()">
                                            <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ¦Ø§Øª</option>
                                            <option value="Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª">Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª</option>
                                            <option value="Ù…Ù„Ø§Ø¨Ø³">Ù…Ù„Ø§Ø¨Ø³</option>
                                            <option value="Ø£Ø¬Ù‡Ø²Ø©">Ø£Ø¬Ù‡Ø²Ø©</option>
                                            <option value="Ù…Ù†Ø²Ù„ÙŠØ©">Ù…Ù†Ø²Ù„ÙŠØ©</option>
                                            <option value="Ø±ÙŠØ§Ø¶ÙŠØ©">Ø±ÙŠØ§Ø¶ÙŠØ©</option>
                                            <option value="Ø£Ø®Ø±Ù‰">Ø£Ø®Ø±Ù‰</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Ø§Ù„ØµÙˆØ±Ø©</th>
                                            <th>Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</th>
                                            <th>Ø§Ù„ÙØ¦Ø©</th>
                                            <th>Ø§Ù„Ø³Ø¹Ø±</th>
                                            <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                            <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                                        </tr>
                                    </thead>
                                    <tbody id="products-table-body">
                                        <tr>
                                            <td colspan="6" class="text-center text-muted py-4">
                                                <div class="loading-spinner"></div>
                                                <p class="mt-3">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª...</p>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ù‚Ø³Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª -->
                <div id="orders-management-content" class="d-none">
                    <div class="card admin-card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-shopping-cart me-2"></i>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª
                            </h5>
                            <div class="btn-group">
                                <button class="btn btn-sm btn-outline-primary" onclick="refreshOrders()">
                                    <i class="fas fa-redo me-1"></i>ØªØ­Ø¯ÙŠØ«
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØµÙÙŠØ© -->
                            <div class="search-filter-container">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="input-group">
                                            <input type="text" id="order-search" class="form-control" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨ Ø£Ùˆ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„...">
                                            <button class="btn btn-primary" onclick="searchOrders()">
                                                <i class="fas fa-search"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <select id="status-filter" class="form-select" onchange="filterOrdersByStatus()">
                                            <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª</option>
                                            <option value="pending">Ù…Ø¹Ù„Ù‚</option>
                                            <option value="processing">Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</option>
                                            <option value="shipped">ØªÙ… Ø§Ù„Ø´Ø­Ù†</option>
                                            <option value="delivered">ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…</option>
                                            <option value="cancelled">Ù…Ù„ØºÙŠ</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª -->
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</th>
                                            <th>Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
                                            <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                                            <th>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</th>
                                            <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
                                            <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                            <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                                        </tr>
                                    </thead>
                                    <tbody id="orders-table-body">
                                        <tr>
                                            <td colspan="7" class="text-center text-muted py-4">
                                                Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ù‚Ø³Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ -->
                <div id="customers-management-content" class="d-none">
                    <div class="card admin-card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-users me-2"></i>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
                            </h5>
                            <div class="btn-group">
                                <button class="btn btn-sm btn-outline-primary" onclick="refreshCustomers()">
                                    <i class="fas fa-redo me-1"></i>ØªØ­Ø¯ÙŠØ«
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« -->
                            <div class="search-filter-container">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="input-group">
                                            <input type="text" id="customer-search" class="form-control" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù…ÙŠÙ„...">
                                            <button class="btn btn-primary" onclick="searchCustomers()">
                                                <i class="fas fa-search"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ -->
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
                                            <th>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</th>
                                            <th>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</th>
                                            <th>Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</th>
                                            <th>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</th>
                                            <th>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„</th>
                                            <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                                        </tr>
                                    </thead>
                                    <tbody id="customers-table-body">
                                        <tr>
                                            <td colspan="7" class="text-center text-muted py-4">
                                                Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù…Ù„Ø§Ø¡
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ù‚Ø³Ù… Ø§Ù„ØªØµØ­ÙŠØ­ ÙˆØ§Ù„Ø§ØªØµØ§Ù„ -->
                <div class="row mt-5" id="debug-section">
                    <div class="col-12">
                        <div class="card border-warning">
                            <div class="card-header bg-warning text-dark">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-tools me-2"></i>ØªØµØ­ÙŠØ­ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙˆØ§Ù„Ø§ØªØµØ§Ù„
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h6 class="border-bottom pb-2">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„:</h6>
                                        <div class="d-flex flex-wrap gap-2 mb-3">
                                            <button class="btn btn-info btn-sm" onclick="testFirebaseConnection()">
                                                <i class="fas fa-wifi me-1"></i>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„
                                            </button>
                                            <button class="btn btn-success btn-sm" onclick="addSampleProduct()">
                                                <i class="fas fa-vial me-1"></i>Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ ØªØ¬Ø±ÙŠØ¨ÙŠ
                                            </button>
                                            <button class="btn btn-warning btn-sm" onclick="clearDebugResults()">
                                                <i class="fas fa-broom me-1"></i>Ù…Ø³Ø­ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
                                            </button>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <h6 class="border-bottom pb-2">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…:</h6>
                                        <ul class="list-unstyled small">
                                            <li class="mb-2">
                                                <strong>Firebase:</strong> 
                                                <span id="firebase-status" class="badge bg-secondary">ğŸ” Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...</span>
                                            </li>
                                            <li class="mb-2">
                                                <strong>Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:</strong> 
                                                <span id="db-status" class="badge bg-secondary">ğŸ” Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...</span>
                                            </li>
                                            <li class="mb-2">
                                                <strong>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</strong> 
                                                <span id="products-count-badge" class="badge bg-primary">0</span>
                                            </li>
                                            <li class="mb-2">
                                                <strong>Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„:</strong> 
                                                <span id="connection-status" class="badge bg-secondary">ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ</span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div id="debug-result" class="mt-3"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„ Ù…Ù†ØªØ¬ -->
    <div id="product-modal" class="form-modal d-none">
        <div class="form-modal-content">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h4 class="text-primary" id="product-modal-title">
                    <i class="fas fa-plus me-2"></i>Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯
                </h4>
                <button type="button" class="btn-close" onclick="hideProductForm()"></button>
            </div>
            
            <form id="product-form">
                <input type="hidden" id="product-id">
                
                <div class="mb-3">
                    <label for="product-name" class="form-label">Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</label>
                    <input type="text" class="form-control" id="product-name" required>
                </div>
                
                <div class="mb-3">
                    <label for="product-price" class="form-label">Ø³Ø¹Ø± Ø§Ù„Ù…Ù†ØªØ¬ ($)</label>
                    <input type="number" class="form-control" id="product-price" step="0.01" min="0" required>
                </div>
                
                <div class="mb-3">
                    <label for="product-description" class="form-label">ÙˆØµÙ Ø§Ù„Ù…Ù†ØªØ¬</label>
                    <textarea class="form-control" id="product-description" rows="3"></textarea>
                </div>
                
                <div class="mb-3">
                    <label for="product-category" class="form-label">ÙØ¦Ø© Ø§Ù„Ù…Ù†ØªØ¬</label>
                    <select class="form-select" id="product-category" required>
                        <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø©</option>
                        <option value="Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª">Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª</option>
                        <option value="Ù…Ù„Ø§Ø¨Ø³">Ù…Ù„Ø§Ø¨Ø³</option>
                        <option value="Ø£Ø¬Ù‡Ø²Ø©">Ø£Ø¬Ù‡Ø²Ø©</option>
                        <option value="Ù…Ù†Ø²Ù„ÙŠØ©">Ù…Ù†Ø²Ù„ÙŠØ©</option>
                        <option value="Ø±ÙŠØ§Ø¶ÙŠØ©">Ø±ÙŠØ§Ø¶ÙŠØ©</option>
                        <option value="Ø£Ø®Ø±Ù‰">Ø£Ø®Ø±Ù‰</option>
                    </select>
                </div>
                
                <div class="mb-3">
                    <label for="product-image" class="form-label">Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬</label>
                    <input type="url" class="form-control" id="product-image" placeholder="https://example.com/image.jpg">
                    <div class="form-text">Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ØµÙˆØ±Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ©</div>
                </div>
                
                <div class="mb-3">
                    <label for="product-purchase-link" class="form-label">Ø±Ø§Ø¨Ø· Ø§Ù„Ø´Ø±Ø§Ø¡ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                    <input type="url" class="form-control" id="product-purchase-link" placeholder="https://example.com/buy">
                </div>
                
                <div class="mb-3">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="product-active">
                        <label class="form-check-label" for="product-active">
                            Ø§Ù„Ù…Ù†ØªØ¬ Ù†Ø´Ø·
                        </label>
                    </div>
                </div>
                
                <div class="d-flex gap-2">
                    <button type="submit" class="btn btn-success flex-fill" id="product-form-submit">
                        <i class="fas fa-save me-2"></i>Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="hideProductForm()">
                        <i class="fas fa-times me-2"></i>Ø¥Ù„ØºØ§Ø¡
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- ğŸ”¥ Ù…ÙƒØªØ¨Ø§Øª Firebase -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="../js/firebase-config.js"></script>
    <script src="../js/firebase-db.js"></script>

    <script>
        // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        let currentEditingProduct = null;
        let allProducts = [];
        let allOrders = [];
        let allCustomers = [];

        // Ø¯ÙˆØ§Ù„ Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
        function showDashboard() {
            document.getElementById('dashboard-content').classList.remove('d-none');
            document.getElementById('products-management-content').classList.add('d-none');
            document.getElementById('orders-management-content').classList.add('d-none');
            document.getElementById('customers-management-content').classList.add('d-none');
            document.getElementById('page-title').innerHTML = '<i class="fas fa-tachometer-alt me-2"></i>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…';
            document.getElementById('debug-section').classList.remove('d-none');
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            updateStatistics();
            displayRecentProducts();
            displayRecentOrders();
        }

        function showProductsManagement() {
            document.getElementById('dashboard-content').classList.add('d-none');
            document.getElementById('products-management-content').classList.remove('d-none');
            document.getElementById('orders-management-content').classList.add('d-none');
            document.getElementById('customers-management-content').classList.add('d-none');
            document.getElementById('page-title').innerHTML = '<i class="fas fa-boxes me-2"></i>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª';
            document.getElementById('debug-section').classList.add('d-none');
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
            loadProductsTable();
        }

        function showOrdersManagement() {
            document.getElementById('dashboard-content').classList.add('d-none');
            document.getElementById('products-management-content').classList.add('d-none');
            document.getElementById('orders-management-content').classList.remove('d-none');
            document.getElementById('customers-management-content').classList.add('d-none');
            document.getElementById('page-title').innerHTML = '<i class="fas fa-shopping-cart me-2"></i>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª';
            document.getElementById('debug-section').classList.add('d-none');
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
            loadOrdersTable();
        }

        function showCustomersManagement() {
            document.getElementById('dashboard-content').classList.add('d-none');
            document.getElementById('products-management-content').classList.add('d-none');
            document.getElementById('orders-management-content').classList.add('d-none');
            document.getElementById('customers-management-content').classList.remove('d-none');
            document.getElementById('page-title').innerHTML = '<i class="fas fa-users me-2"></i>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡';
            document.getElementById('debug-section').classList.add('d-none');
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
            loadCustomersTable();
        }

        // Ø¯ÙˆØ§Ù„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
        function showAddProductForm() {
            document.getElementById('product-modal-title').innerHTML = '<i class="fas fa-plus me-2"></i>Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯';
            document.getElementById('product-form-submit').innerHTML = '<i class="fas fa-save me-2"></i>Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬';
            document.getElementById('product-form').reset();
            document.getElementById('product-id').value = '';
            currentEditingProduct = null;
            
            document.getElementById('product-modal').classList.remove('d-none');
            document.getElementById('product-modal').classList.add('d-flex');
        }

        function showEditProductForm(product) {
            document.getElementById('product-modal-title').innerHTML = '<i class="fas fa-edit me-2"></i>ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬';
            document.getElementById('product-form-submit').innerHTML = '<i class="fas fa-save me-2"></i>ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬';
            
            // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            document.getElementById('product-id').value = product.id;
            document.getElementById('product-name').value = product.name;
            document.getElementById('product-price').value = product.price;
            document.getElementById('product-description').value = product.description;
            document.getElementById('product-category').value = product.category;
            document.getElementById('product-image').value = product.image;
            document.getElementById('product-purchase-link').value = product.purchaseLink || '';
            document.getElementById('product-active').checked = product.active !== false;
            
            currentEditingProduct = product;
            
            document.getElementById('product-modal').classList.remove('d-none');
            document.getElementById('product-modal').classList.add('d-flex');
        }

        function hideProductForm() {
            document.getElementById('product-modal').classList.remove('d-flex');
            document.getElementById('product-modal').classList.add('d-none');
            document.getElementById('product-form').reset();
            currentEditingProduct = null;
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¥Ø±Ø³Ø§Ù„ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ù†ØªØ¬
        document.getElementById('product-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const productId = document.getElementById('product-id').value;
            const productName = document.getElementById('product-name').value;
            const productPrice = document.getElementById('product-price').value;
            const productDescription = document.getElementById('product-description').value;
            const productCategory = document.getElementById('product-category').value;
            const productImage = document.getElementById('product-image').value;
            const purchaseLink = document.getElementById('product-purchase-link').value;
            const isActive = document.getElementById('product-active').checked;
            
            if (!productName || !productPrice || !productCategory) {
                alert('âŒ ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');
                return;
            }
            
            const productData = {
                name: productName,
                price: parseFloat(productPrice),
                description: productDescription || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ',
                category: productCategory,
                image: productImage || `https://via.placeholder.com/300x200/007bff/ffffff?text=${encodeURIComponent(productName)}`,
                purchaseLink: purchaseLink,
                active: isActive,
                dateAdded: new Date().toISOString(),
                updatedAt: firebase.firestore.FieldValue.serverTimestamp()
            };
            
            try {
                if (productId) {
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬
                    await updateProductInFirebase(productId, productData);
                    alert(`âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« "${productName}" Ø¨Ù†Ø¬Ø§Ø­!`);
                } else {
                    // Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯
                    await addProductToFirebase(productData);
                    alert(`âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© "${productName}" Ø¨Ù†Ø¬Ø§Ø­!`);
                }
                
                hideProductForm();
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
                setTimeout(() => {
                    updateStatistics();
                    displayRecentProducts();
                    loadProductsTable();
                    checkSystemStatus();
                }, 1000);
                
            } catch (error) {
                console.error('âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©:', error);
                alert(`âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©: ${error.message}`);
            }
        });

        async function deleteProduct(productId, productName) {
            if (confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ "${productName}"ØŸ`)) {
                try {
                    await deleteProductFromFirebase(productId);
                    alert(`âœ… ØªÙ… Ø­Ø°Ù "${productName}" Ø¨Ù†Ø¬Ø§Ø­!`);
                    
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
                    updateStatistics();
                    displayRecentProducts();
                    loadProductsTable();
                } catch (error) {
                    console.error('âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø­Ø°Ù:', error);
                    alert(`âŒ ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬: ${error.message}`);
                }
            }
        }

        // Ø¯ÙˆØ§Ù„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª
        async function loadOrdersTable() {
            try {
                // Ù…Ø­Ø§ÙƒØ§Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø·Ù„Ø¨Ø§Øª (ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§ Ø¨Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„ÙØ¹Ù„ÙŠ Ù…Ø¹ Firebase)
                const orders = await getOrdersFromFirebase();
                allOrders = orders;
                
                const tableBody = document.getElementById('orders-table-body');
                
                if (orders.length === 0) {
                    tableBody.innerHTML = `
                        <tr>
                            <td colspan="7" class="text-center text-muted py-4">
                                Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª
                            </td>
                        </tr>
                    `;
                    return;
                }
                
                let ordersHTML = '';
                orders.forEach(order => {
                    const statusClass = getOrderStatusClass(order.status);
                    const statusText = getOrderStatusText(order.status);
                    const orderDate = new Date(order.date).toLocaleDateString('ar-EG');
                    
                    ordersHTML += `
                        <tr>
                            <td>#${order.id}</td>
                            <td>${order.customer.name}</td>
                            <td>${orderDate}</td>
                            <td>${order.items.length} Ù…Ù†ØªØ¬</td>
                            <td>$${order.total}</td>
                            <td><span class="order-status ${statusClass}">${statusText}</span></td>
                            <td>
                                <div class="action-buttons">
                                    <button class="btn btn-sm btn-outline-primary" onclick="viewOrderDetails('${order.id}')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-success" onclick="updateOrderStatus('${order.id}', 'processing')">
                                        <i class="fas fa-cog"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-warning" onclick="updateOrderStatus('${order.id}', 'shipped')">
                                        <i class="fas fa-shipping-fast"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger" onclick="updateOrderStatus('${order.id}', 'cancelled')">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    `;
                });
                
                tableBody.innerHTML = ordersHTML;
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª:', error);
                document.getElementById('orders-table-body').innerHTML = `
                    <tr>
                        <td colspan="7" class="text-center text-danger py-4">
                            <i class="fas fa-exclamation-triangle me-2"></i>Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
                        </td>
                    </tr>
                `;
            }
        }

        function getOrderStatusClass(status) {
            const statusClasses = {
                'pending': 'status-pending',
                'processing': 'status-processing',
                'shipped': 'status-shipped',
                'delivered': 'status-delivered',
                'cancelled': 'status-cancelled'
            };
            return statusClasses[status] || 'status-pending';
        }

        function getOrderStatusText(status) {
            const statusTexts = {
                'pending': 'Ù…Ø¹Ù„Ù‚',
                'processing': 'Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©',
                'shipped': 'ØªÙ… Ø§Ù„Ø´Ø­Ù†',
                'delivered': 'ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…',
                'cancelled': 'Ù…Ù„ØºÙŠ'
            };
            return statusTexts[status] || 'Ù…Ø¹Ù„Ù‚';
        }

        async function updateOrderStatus(orderId, newStatus) {
            try {
                // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ (ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§ Ø¨Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„ÙØ¹Ù„ÙŠ Ù…Ø¹ Firebase)
                alert(`âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ #${orderId} Ø¥Ù„Ù‰ "${getOrderStatusText(newStatus)}"`);
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
                loadOrdersTable();
                displayRecentOrders();
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨:', error);
                alert(`âŒ ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨: ${error.message}`);
            }
        }

        function viewOrderDetails(orderId) {
            alert(`Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ #${orderId} - Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±`);
        }

        // Ø¯ÙˆØ§Ù„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
        async function loadCustomersTable() {
            try {
                // Ù…Ø­Ø§ÙƒØ§Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ (ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§ Ø¨Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„ÙØ¹Ù„ÙŠ Ù…Ø¹ Firebase)
                const customers = await getCustomersFromFirebase();
                allCustomers = customers;
                
                const tableBody = document.getElementById('customers-table-body');
                
                if (customers.length === 0) {
                    tableBody.innerHTML = `
                        <tr>
                            <td colspan="7" class="text-center text-muted py-4">
                                Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù…Ù„Ø§Ø¡
                            </td>
                        </tr>
                    `;
                    return;
                }
                
                let customersHTML = '';
                customers.forEach(customer => {
                    const registerDate = new Date(customer.registerDate).toLocaleDateString('ar-EG');
                    
                    customersHTML += `
                        <tr>
                            <td>${customer.name}</td>
                            <td>${customer.email}</td>
                            <td>${customer.phone || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}</td>
                            <td>${customer.ordersCount || 0}</td>
                            <td>$${customer.totalSpent || 0}</td>
                            <td>${registerDate}</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="btn btn-sm btn-outline-primary" onclick="viewCustomerDetails('${customer.id}')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-success" onclick="contactCustomer('${customer.id}')">
                                        <i class="fas fa-envelope"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    `;
                });
                
                tableBody.innerHTML = customersHTML;
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡:', error);
                document.getElementById('customers-table-body').innerHTML = `
                    <tr>
                        <td colspan="7" class="text-center text-danger py-4">
                            <i class="fas fa-exclamation-triangle me-2"></i>Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
                        </td>
                    </tr>
                `;
            }
        }

        function viewCustomerDetails(customerId) {
            alert(`Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„ ${customerId} - Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±`);
        }

        function contactCustomer(customerId) {
            alert(`Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¹Ù…ÙŠÙ„ ${customerId} - Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±`);
        }

        // Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
        async function loadProductsTable() {
            try {
                const products = await getProductsFromFirebase();
                allProducts = products;
                
                const tableBody = document.getElementById('products-table-body');
                
                if (products.length === 0) {
                    tableBody.innerHTML = `
                        <tr>
                            <td colspan="6" class="text-center text-muted py-4">
                                Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª
                            </td>
                        </tr>
                    `;
                    return;
                }
                
                let productsHTML = '';
                products.forEach(product => {
                    const statusText = product.active !== false ? 'Ù†Ø´Ø·' : 'ØºÙŠØ± Ù†Ø´Ø·';
                    const statusClass = product.active !== false ? 'text-success' : 'text-danger';
                    
                    productsHTML += `
                        <tr>
                            <td>
                                <img src="${product.image}" alt="${product.name}" class="product-image" style="width: 60px; height: 60px; object-fit: cover; border-radius: 5px;">
                            </td>
                            <td>${product.name}</td>
                            <td>${product.category}</td>
                            <td>$${product.price}</td>
                            <td><span class="${statusClass}">${statusText}</span></td>
                            <td>
                                <div class="action-buttons">
                                    <button class="btn btn-sm btn-outline-primary" onclick="showEditProductForm(${JSON.stringify(product).replace(/"/g, '&quot;')})">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger" onclick="deleteProduct('${product.id}', '${product.name}')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    `;
                });
                
                tableBody.innerHTML = productsHTML;
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:', error);
                document.getElementById('products-table-body').innerHTML = `
                    <tr>
                        <td colspan="6" class="text-center text-danger py-4">
                            <i class="fas fa-exclamation-triangle me-2"></i>Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                        </td>
                    </tr>
                `;
            }
        }

        // Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØµØ­ÙŠØ­ ÙˆØ§Ù„Ø§ØªØµØ§Ù„ (Ù†ÙØ³ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©)
        function testFirebaseConnection() {
            const result = document.getElementById('debug-result');
            result.innerHTML = '<div class="alert alert-info">ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ù…Ø¹ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</div>';
            
            checkSystemStatus();
            
            setTimeout(async () => {
                if (typeof firebase === 'undefined') {
                    result.innerHTML = '<div class="alert alert-danger">âŒ Ù…ÙƒØªØ¨Ø© Firebase ØºÙŠØ± Ù…Ø­Ù…Ù„Ø©. ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.</div>';
                    updateConnectionStatus('danger', 'ØºÙŠØ± Ù…ØªØµÙ„');
                    return;
                }
                
                if (typeof db === 'undefined' || !window.db) {
                    result.innerHTML = '<div class="alert alert-danger">âŒ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± Ù…Ù‡ÙŠØ£Ø©. ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙƒÙˆÙŠÙ†.</div>';
                    updateConnectionStatus('danger', 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ‡ÙŠØ¦Ø©');
                    return;
                }
                
                try {
                    const snapshot = await db.collection('products').limit(1).get();
                    const productsCount = await getProductsCount();
                    
                    result.innerHTML = `
                        <div class="alert alert-success">
                            <h6>âœ… Ø§Ù„Ø§ØªØµØ§Ù„ ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­</h6>
                            <ul class="mb-0">
                                <li>ØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù†Ø¬Ø§Ø­ Ù…Ø¹ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</li>
                                <li>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…: ${productsCount}</li>
                                <li>Ø§Ù„ÙˆÙ‚Øª: ${new Date().toLocaleTimeString('ar-EG')}</li>
                            </ul>
                        </div>
                    `;
                    updateConnectionStatus('success', 'Ù…ØªØµÙ„');
                    
                } catch (error) {
                    let errorMessage = `âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„: ${error.message}`;
                    if (error.code) {
                        errorMessage += ` (ÙƒÙˆØ¯ Ø§Ù„Ø®Ø·Ø£: ${error.code})`;
                    }
                    
                    if (error.code === 'permission-denied') {
                        errorMessage += '<br><strong>Ø§Ù„Ø­Ù„:</strong> ØªØ­Ù‚Ù‚ Ù…Ù† Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø£Ù…Ø§Ù† ÙÙŠ Firebase Console';
                    } else if (error.code === 'unavailable') {
                        errorMessage += '<br><strong>Ø§Ù„Ø­Ù„:</strong> ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª';
                    }
                    
                    result.innerHTML = `<div class="alert alert-danger">${errorMessage}</div>`;
                    updateConnectionStatus('danger', 'ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„');
                }
            }, 1000);
        }

        // Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© Ø£Ø®Ø±Ù‰ (Ù†ÙØ³ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©)
        async function updateProductsCount() {
            try {
                const products = await getProductsFromFirebase();
                const countElement = document.getElementById('products-count');
                const countBadge = document.getElementById('products-count-badge');
                
                if (countElement) {
                    countElement.textContent = products.length;
                }
                if (countBadge) {
                    countBadge.textContent = products.length;
                }
                
                return products.length;
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø¯:', error);
                return 0;
            }
        }

        async function getProductsCount() {
            try {
                const products = await getProductsFromFirebase();
                return products.length;
            } catch (error) {
                return 0;
            }
        }

        function checkSystemStatus() {
            const firebaseStatus = document.getElementById('firebase-status');
            const dbStatus = document.getElementById('db-status');
            
            if (typeof firebase === 'undefined') {
                firebaseStatus.innerHTML = 'âŒ ØºÙŠØ± Ù…Ø­Ù…Ù„';
                firebaseStatus.className = 'badge bg-danger';
            } else {
                firebaseStatus.innerHTML = 'âœ… Ù…Ø­Ù…Ù„';
                firebaseStatus.className = 'badge bg-success';
            }
            
            if (!window.db) {
                dbStatus.innerHTML = 'âŒ ØºÙŠØ± Ù…Ù‡ÙŠØ£Ø©';
                dbStatus.className = 'badge bg-danger';
            } else {
                dbStatus.innerHTML = 'âœ… Ø¬Ø§Ù‡Ø²Ø©';
                dbStatus.className = 'badge bg-success';
            }
        }

        function updateConnectionStatus(status, text) {
            const connectionStatus = document.getElementById('connection-status');
            const statusClasses = {
                'success': 'badge bg-success',
                'danger': 'badge bg-danger',
                'warning': 'badge bg-warning',
                'secondary': 'badge bg-secondary'
            };
            
            connectionStatus.textContent = text;
            connectionStatus.className = statusClasses[status] || statusClasses.secondary;
        }

        function clearDebugResults() {
            document.getElementById('debug-result').innerHTML = '';
        }

        function logout() {
            localStorage.removeItem('adminLoggedIn');
            localStorage.removeItem('adminUsername');
            window.location.href = 'login.html';
        }

        async function updateStatistics() {
            try {
                const products = await getProductsFromFirebase();
                
                // ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                document.getElementById('products-count').textContent = products.length;
                document.getElementById('products-count-badge').textContent = products.length;
                
                // ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø£Ø®Ø±Ù‰ (ÙŠÙ…ÙƒÙ† ØªØ·ÙˆÙŠØ±Ù‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹)
                document.getElementById('orders-count').textContent = '0';
                document.getElementById('customers-count').textContent = '0';
                document.getElementById('revenue-count').textContent = '$0';
                
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª:', error);
            }
        }

        // Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø­Ø³Ù†Ø© Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„ØªØ´ØºÙŠÙ„');
            
            // ØªØ¹ÙŠÙŠÙ† Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            const username = localStorage.getItem('adminUsername') || 'wacelalorshe';
            document.getElementById('admin-username').textContent = username;
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø§Ù„Ø©
            checkSystemStatus();
            updateStatistics();
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            setTimeout(() => {
                displayRecentProducts();
                displayRecentOrders();
            }, 1000);
        });

        // Ø¯ÙˆØ§Ù„ Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§ Ø¨Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„ÙØ¹Ù„ÙŠ Ù…Ø¹ Firebase)
        async function getOrdersFromFirebase() {
            // Ù…Ø­Ø§ÙƒØ§Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø¨Ø§Øª
            return [
                {
                    id: 'ORD001',
                    customer: { name: 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯', email: 'ahmed@example.com' },
                    date: new Date().toISOString(),
                    items: [{ name: 'Ù‡Ø§ØªÙ Ø°ÙƒÙŠ', quantity: 1, price: 299.99 }],
                    total: 299.99,
                    status: 'pending'
                },
                {
                    id: 'ORD002',
                    customer: { name: 'ÙØ§Ø·Ù…Ø© Ø¹Ù„ÙŠ', email: 'fatima@example.com' },
                    date: new Date(Date.now() - 86400000).toISOString(),
                    items: [
                        { name: 'Ø³Ù…Ø§Ø¹Ø§Øª Ù„Ø§Ø³Ù„ÙƒÙŠØ©', quantity: 1, price: 149.99 },
                        { name: 'Ø­Ù‚ÙŠØ¨Ø© Ø¸Ù‡Ø±', quantity: 1, price: 79.99 }
                    ],
                    total: 229.98,
                    status: 'processing'
                }
            ];
        }

        async function getCustomersFromFirebase() {
            // Ù…Ø­Ø§ÙƒØ§Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
            return [
                {
                    id: 'CUST001',
                    name: 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯',
                    email: 'ahmed@example.com',
                    phone: '+966500000001',
                    ordersCount: 3,
                    totalSpent: 899.97,
                    registerDate: new Date(Date.now() - 30 * 86400000).toISOString()
                },
                {
                    id: 'CUST002',
                    name: 'ÙØ§Ø·Ù…Ø© Ø¹Ù„ÙŠ',
                    email: 'fatima@example.com',
                    phone: '+966500000002',
                    ordersCount: 5,
                    totalSpent: 1249.95,
                    registerDate: new Date(Date.now() - 60 * 86400000).toISOString()
                },
                {
                    id: 'CUST003',
                    name: 'Ù…Ø­Ù…Ø¯ Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡',
                    email: 'mohammed@example.com',
                    phone: '+966500000003',
                    ordersCount: 1,
                    totalSpent: 199.99,
                    registerDate: new Date(Date.now() - 15 * 86400000).toISOString()
                }
            ];
        }
    </script>
</body>
</html>
