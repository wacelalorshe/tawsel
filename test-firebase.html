<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Firebase</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f5f5f5; }
        .btn { padding: 10px 15px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; }
        .success { background: green; color: white; }
        .error { background: red; color: white; }
        .info { background: blue; color: white; }
        #output { background: white; padding: 15px; margin: 10px 0; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø§ØªØµØ§Ù„ Firebase</h1>
    
    <button class="btn info" onclick="testFirebase()">Ø§Ø®ØªØ¨Ø§Ø± Firebase</button>
    <button class="btn info" onclick="testAddProduct()">Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</button>
    <button class="btn info" onclick="testGetProducts()">Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</button>
    <button class="btn error" onclick="clearOutput()">Ù…Ø³Ø­ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</button>
    
    <div id="output"></div>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script>
        // ØªÙƒÙˆÙŠÙ† Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyBnCeIjj1PHBrDRS-zjw8qLEGc-w4SS1XE",
            authDomain: "tawsel735.firebaseapp.com",
            projectId: "tawsel735",
            storageBucket: "tawsel735.firebasestorage.app",
            messagingSenderId: "723079637443",
            appId: "1:723079637443:web:170f06eec77d25e4647576",
            measurementId: "G-R84FEYXMDJ"
        };

        let db = null;

        function addOutput(message, type = 'info') {
            const output = document.getElementById('output');
            const div = document.createElement('div');
            div.style.padding = '10px';
            div.style.margin = '5px 0';
            div.style.borderLeft = '5px solid ' + 
                (type === 'error' ? 'red' : type === 'success' ? 'green' : 'blue');
            div.style.background = type === 'error' ? '#ffe6e6' : 
                                 type === 'success' ? '#e6ffe6' : '#e6f3ff';
            div.innerHTML = message;
            output.appendChild(div);
        }

        function clearOutput() {
            document.getElementById('output').innerHTML = '';
        }

        function testFirebase() {
            addOutput('ğŸ”¥ Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Firebase...');
            
            try {
                // ØªÙ‡ÙŠØ¦Ø© Firebase
                if (!firebase.apps.length) {
                    firebase.initializeApp(firebaseConfig);
                }
                db = firebase.firestore();
                
                addOutput('âœ… ØªÙ… ØªÙ‡ÙŠØ¦Ø© Firebase Ø¨Ù†Ø¬Ø§Ø­', 'success');
                addOutput('ğŸ“¡ Ù…Ø´Ø±ÙˆØ¹: tawsel735', 'info');
                addOutput('ğŸ—„ï¸ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ' + (db ? 'Ø¬Ø§Ù‡Ø²Ø©' : 'ØºÙŠØ± Ø¬Ø§Ù‡Ø²Ø©'), 'info');
                
            } catch (error) {
                addOutput('âŒ ÙØ´Ù„ ØªÙ‡ÙŠØ¦Ø© Firebase: ' + error.message, 'error');
            }
        }

        async function testAddProduct() {
            if (!db) {
                addOutput('âŒ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± Ø¬Ø§Ù‡Ø²Ø©. Ø§Ø®ØªØ± "Ø§Ø®ØªØ¨Ø§Ø± Firebase" Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }

            addOutput('ğŸ”„ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ ØªØ¬Ø±ÙŠØ¨ÙŠ...');
            
            const testProduct = {
                name: "Ù…Ù†ØªØ¬ Ø§Ø®ØªØ¨Ø§Ø± Ù…Ù† Ø§Ù„ØªØµØ­ÙŠØ­",
                price: 199.99,
                description: "Ù‡Ø°Ø§ Ù…Ù†ØªØ¬ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙÙ‚Ø·",
                category: "Ø§Ø®ØªØ¨Ø§Ø±",
                image: "https://via.placeholder.com/300x200/007bff/ffffff?text=Ù…Ù†ØªØ¬+Ø§Ø®ØªØ¨Ø§Ø±",
                dateAdded: new Date().toLocaleDateString('ar-EG'),
                createdAt: firebase.firestore.FieldValue.serverTimestamp()
            };

            try {
                const docRef = await db.collection('products').add(testProduct);
                addOutput('âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                addOutput('ğŸ†” Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ù†ØªØ¬: ' + docRef.id, 'info');
                addOutput('ğŸ“¦ Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬: ' + testProduct.name, 'info');
                
            } catch (error) {
                addOutput('âŒ ÙØ´Ù„ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬: ' + error.message, 'error');
                addOutput('ğŸ” ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø·Ø£: ' + JSON.stringify(error), 'error');
            }
        }

        async function testGetProducts() {
            if (!db) {
                addOutput('âŒ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± Ø¬Ø§Ù‡Ø²Ø©', 'error');
                return;
            }

            addOutput('ğŸ”„ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');
            
            try {
                const snapshot = await db.collection('products').get();
                const products = [];
                snapshot.forEach(doc => {
                    products.push({ id: doc.id, ...doc.data() });
                });
                
                addOutput('âœ… Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: ' + products.length, 'success');
                
                products.forEach(product => {
                    addOutput(`ğŸ“¦ ${product.name} - $${product.price} (${product.id})`, 'info');
                });
                
            } catch (error) {
                addOutput('âŒ ÙØ´Ù„ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: ' + error.message, 'error');
            }
        }

        // Ø§Ø®ØªØ¨Ø§Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠ
        setTimeout(testFirebase, 1000);
    </script>
</body>
</html>
